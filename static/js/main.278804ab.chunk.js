(this["webpackJsonptrivia-react-redux"]=this["webpackJsonptrivia-react-redux"]||[]).push([[0],{21:function(e,t,a){e.exports=a.p+"static/media/trivia.466d153e.png"},31:function(e,t,a){e.exports=a(56)},40:function(e,t,a){},41:function(e,t,a){},48:function(e,t){},49:function(e,t,a){},50:function(e,t,a){},51:function(e,t,a){},52:function(e,t,a){},53:function(e,t,a){},54:function(e,t,a){},55:function(e,t,a){},56:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(19),o=a.n(c),l=a(6),i=a(5),s=a(2),u=a(15),m=a(9),p=a(4),d=a.n(p),f=a(12),b=a(3),v=a(21),E=a.n(v),g=a(13),y=function(){var e=localStorage.getItem("ranking");if(e)return JSON.parse(e)},h=function(e){localStorage.setItem("token",e)},O=a(16),N=a(28),j=a(29),k={playerName:"",assertions:0,score:0,gravatarEmail:""};var w=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:k,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOGIN_USER":return Object(m.a)(Object(m.a)({},e),{},{playerName:t.payload.playerName,gravatarEmail:t.payload.email});case"CHANGE_SCORE":return Object(m.a)(Object(m.a)({},e),{},{score:e.score+t.payload.score,assertions:e.assertions+t.payload.assertions});case"RESET_STORE":return Object(m.a)(Object(m.a)({},e),{},{playerName:"",gravatarEmail:"",score:0,assertions:0});default:return e}},S={category:"any",difficulty:"any",type:"any"};var x=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:S,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CHANGE_CONFIG":return Object(m.a)(Object(m.a)({},e),{},Object(u.a)({},t.payload.config,t.payload.value));default:return e}},C=Object(O.combineReducers)({player:w,settings:x}),T=Object(O.legacy_createStore)(C,Object(N.composeWithDevTools)(Object(O.applyMiddleware)(j.a)));window.Cypress&&(window.store=T);var I=T,q=function(){var e=Object(f.a)(d.a.mark((function e(){var t,a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://opentdb.com/api_token.php?command=request");case 2:return t=e.sent,e.next=5,t.json();case 5:return a=e.sent,e.abrupt("return",a.token);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),_=function(){var e=Object(f.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,q();case 2:if(t=e.sent,h(t),!t){e.next=6;break}return e.abrupt("return",t);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),G=function(){var e=I.getState().settings,t="https://opentdb.com/api.php?amount=5&";return"any"!==e.category&&(t="".concat(t,"category=").concat(e.category,"&")),"any"!==e.difficulty&&(t="".concat(t,"difficulty=").concat(e.difficulty,"&")),"any"!==e.type&&(t="".concat(t,"type=").concat(e.type,"&")),"".concat(t,"token=")},R=function(){var e=Object(f.a)(d.a.mark((function e(){var t,a,n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_();case 2:return t=e.sent,e.next=5,fetch(G()+t);case 5:return a=e.sent,e.next=8,a.json();case 8:return n=e.sent,e.abrupt("return",n.results);case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),A=function(){var e=Object(f.a)(d.a.mark((function e(){var t,a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://opentdb.com/api_category.php");case 2:return t=e.sent,e.next=5,t.json();case 5:return a=e.sent,e.abrupt("return",a.trivia_categories);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),F=(a(40),a(41),function(){return r.a.createElement("div",{className:"footer"},r.a.createElement("p",null,"Desenvolvido por Pedro Mello."))}),J=function(){var e=Object(l.b)(),t=Object(n.useState)(!0),a=Object(b.a)(t,2),c=a[0],o=a[1],s=Object(n.useState)({playerName:"",email:""}),p=Object(b.a)(s,2),v=p[0],g=p[1],y=function(){var t=Object(f.a)(d.a.mark((function t(){return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e({type:"LOGIN_USER",payload:{playerName:(a=v).playerName,email:a.email}}),localStorage.getItem("ranking")||localStorage.setItem("ranking",""),t.next=4,_();case 4:case"end":return t.stop()}var a}),t)})));return function(){return t.apply(this,arguments)}}();Object(n.useEffect)((function(){var e;!(e=v.email)||!1===/^[\w-.]+@([\w-]+\.)+[\w-]{2,4}$/g.test(e)||v.playerName.length<3?o(!0):o(!1)}),[v]);var h=function(e){var t=e.target,a=t.id,n=t.value;g((function(e){return Object(m.a)(Object(m.a)({},e),{},Object(u.a)({},a,n))}))};return r.a.createElement("div",{className:"login"},r.a.createElement("div",{className:"login-body"},r.a.createElement("img",{src:E.a,className:"Login-logo",alt:"Logo Trivia"}),r.a.createElement("h2",null,"Bem-vindo, insira suas informa\xe7\xf5es para jogar."),r.a.createElement("div",{className:"login-form form"},r.a.createElement("label",{htmlFor:"playerName",className:"login-form"},"Nome:"," ",r.a.createElement("input",{required:!0,"data-testid":"input-player-name",className:"form-control",id:"playerName",type:"playerName",value:v.playerName,onChange:h})),r.a.createElement("label",{htmlFor:"email",className:"login-form"},"Email:"," ",r.a.createElement("input",{required:!0,"data-testid":"input-gravatar-email",className:"form-control",id:"email",type:"email",value:v.email,onChange:h})),r.a.createElement(i.c,{to:"/jogo"},r.a.createElement("input",{"data-testid":"btn-play",className:"btn login-btn",type:"button",onClick:y,disabled:c,value:"Jogar"}))),r.a.createElement("div",{className:"btns-content"},r.a.createElement(i.c,{to:"/configuracao"},r.a.createElement("button",{"data-testid":"btn-settings",className:"btn btn-settings",type:"button"},"Configura\xe7\xe3o")),r.a.createElement(i.c,{to:"/ranking"},r.a.createElement("button",{"data-testid":"btn-ranking",className:"btn btn-ranking",type:"button"},"Ranking")))),r.a.createElement(F,null))},L=a(22),H=a.n(L),M=(a(49),function(){var e=Object(l.c)((function(e){return e.player})),t=e.playerName,a=e.gravatarEmail,n=e.score,c=H()(a).toString(),o="https://www.gravatar.com/avatar/".concat(c);return r.a.createElement("header",null,r.a.createElement("img",{src:E.a,className:"Trivia-logo Login-logo",alt:"logo"}),r.a.createElement("div",{className:"usuario"},r.a.createElement("div",{className:"jogador"},r.a.createElement("h6",null,"Jogador: "),r.a.createElement("p",{"data-testid":"header-player-name"},t)),r.a.createElement("div",{className:"pontuacao"},r.a.createElement("h6",null,"Pontua\xe7\xe3o: "),r.a.createElement("p",{"data-testid":"header-score"},n))),r.a.createElement("img",{"data-testid":"header-profile-picture",className:"avatar",src:o,alt:"Gravatar de ".concat(t)}))}),B=function(){return{type:"RESET_STORE",payload:{}}},D=(a(50),function(e){var t=e.quest,a=e.timer,c=e.setTimer,o=e.gameTimeout,i=e.setGameTimeout,s=e.setNextBtnStatus,u=t.question,m=t.category,p=t.answers,d=t.correct,f=t.difficulty,b=Object(l.b)();Object(n.useEffect)((function(){var e=setInterval((function(){if(o)return function(){return clearInterval(e)};a>0?c(a-1):(i(!0),s(!0))}),1e3);return function(){return clearInterval(e)}}),[o,i,c,a,s]);var v=function(e){var t=e.target;!function(){var e=document.querySelectorAll(".answer-btn"),t=0;e.forEach((function(e){e.innerText===d?(e.classList.add("answer-correct"),e.setAttribute("data-testid","correct-answer")):(e.classList.add("answer-wrong"),e.setAttribute("data-testid","wrong-answer-".concat(t)),t+=1)}))}(),i(!0),t.innerText===d?(!function(){var e;b({type:"CHANGE_SCORE",payload:{score:(e={score:10+a*{hard:3,medium:2,easy:1}[f],assertions:1}).score,assertions:e.assertions}})}(),s(!0)):s(!0)};return r.a.createElement("div",{className:"quest-body"},r.a.createElement("h1",{className:0===a?"finish":a<10?"timerOver":"timer"},a),r.a.createElement("div",{className:"quest-header"},r.a.createElement("h3",{"data-testid":"question-category"},m),r.a.createElement("h2",null,u)),r.a.createElement("div",{"data-testid":"answer-options",className:"answer-options"},p.map((function(e,t){return r.a.createElement("button",{key:t,type:"button",className:"answer-btn",onClick:v,disabled:o,"data-testid":"question-text"},e)}))))}),P=function(e){var t=document.createElement("textarea");return t.innerHTML=e,t.value},U=(a(51),function(){var e=Object(s.f)(),t=Object(n.useState)(!0),a=Object(b.a)(t,2),c=a[0],o=a[1],l=Object(n.useState)(!1),i=Object(b.a)(l,2),u=i[0],m=i[1],p=Object(n.useState)([]),v=Object(b.a)(p,2),E=v[0],y=v[1],h=Object(n.useState)(0),O=Object(b.a)(h,2),N=O[0],j=O[1],k=Object(n.useState)(30),w=Object(b.a)(k,2),S=w[0],x=w[1],C=Object(n.useState)(!1),T=Object(b.a)(C,2),I=T[0],q=T[1],_=function(e){if("string"!==typeof e){var t=[];return e.forEach((function(e){t=[].concat(Object(g.a)(t),[P(e)])})),t}return P(e)};Object(n.useEffect)((function(){var e=function(e){e.forEach((function(e){var t=e.incorrect_answers,a=e.correct_answer,n=e.question,r=e.category,c=e.difficulty;y((function(e){return[].concat(Object(g.a)(e),[{question:_(n),category:r,correct:_(a),answers:(o=[].concat(Object(g.a)(_(t)),[_(a)]),o.sort((function(){return Math.random()-.5})),o),difficulty:c}]);var o}))})),o(!1)};(function(){var t=Object(f.a)(d.a.mark((function t(){var a;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,R();case 2:a=t.sent,e(a);case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}})()()}),[]);return r.a.createElement("div",{className:"game-page"},r.a.createElement(M,null),r.a.createElement("div",{className:"quest-card"},c?r.a.createElement("h1",null,"Carregando..."):r.a.createElement(D,{key:N,quest:E[N],timer:S,setTimer:x,gameTimeout:I,setGameTimeout:q,setNextBtnStatus:m}),u?r.a.createElement("button",{type:"button",className:"btn nxt-btn",onClick:function(){4===N&&e.push("/feedback"),j(N+1),x(30),q(!1),m(!1)}},"Next"):""),r.a.createElement(F,null))}),W=function(e){var t=H()(e).toString();return"https://www.gravatar.com/avatar/".concat(t)},K=(a(52),function(){var e=Object(l.c)((function(e){return e.player})),t=e.score,a=e.assertions,c=e.playerName,o=e.gravatarEmail,s=Object(l.b)();return Object(n.useEffect)((function(){!function(e){var t=e.playerName,a=e.score,n=e.photo,r=y();console.log(r);var c={name:t,score:a,picture:n};if(r){var o=[].concat(Object(g.a)(r),[c]);localStorage.setItem("ranking",JSON.stringify(o))}else localStorage.setItem("ranking",JSON.stringify([c]))}({playerName:c,score:t,photo:W(o)})})),r.a.createElement("div",{className:"feedback-page"},r.a.createElement(M,null),r.a.createElement("div",{className:"feedback-container"},r.a.createElement("div",{"data-testid":"feedback-text",className:"message"},a<3?"Could be better...":"Well Done!"),r.a.createElement("div",{className:"pontuacao-feed"},r.a.createElement("p",null,"Pontua\xe7\xe3o final:"),r.a.createElement("span",{"data-testid":"feedback-total-score"},t)),r.a.createElement("div",{className:"pontuacao-feed"},r.a.createElement("p",null,"Voc\xea acertou:"),r.a.createElement("span",{"data-testid":"feedback-total-question"},a)),r.a.createElement("div",{className:"feedback-btns"},r.a.createElement(i.c,{to:"/"},r.a.createElement("input",{"data-testid":"btn-play-again",type:"button",value:"Jogar Novamente",className:"feed-btn",onClick:function(){return s(B)}})),r.a.createElement(i.c,{to:"/ranking"},r.a.createElement("input",{"data-testid":"btn-ranking",className:"feed-btn",type:"button",value:"Ranking"})))),r.a.createElement(F,null))}),V=(a(53),function(){var e=Object(n.useState)([]),t=Object(b.a)(e,2),a=t[0],c=t[1],o=Object(n.useState)(!0),l=Object(b.a)(o,2),s=l[0],u=l[1];return Object(n.useEffect)((function(){if(y()){var e=y().sort((function(e,t){return t.score-e.score}));c((function(){return Object(g.a)(e)})),u(!1)}}),[c]),r.a.createElement("div",{className:"ranking-page"},r.a.createElement("div",{className:"ranking-header"},r.a.createElement("h1",null,"RANKING"),r.a.createElement(i.c,{to:"/"},r.a.createElement("input",{"data-testid":"btn-go-home",className:"rk-btn",type:"button",value:"Inicio"}))),r.a.createElement("div",{className:"ranking"},s?r.a.createElement("div",{className:"no-records-container"},r.a.createElement("h2",{className:"no-records"},"N\xe3o h\xe1 registros ainda")):r.a.createElement("div",{className:"ranking-container"},a.map((function(e,t){var a=e.name,n=e.score,c=e.picture;return r.a.createElement("div",{key:t,className:"ranking-item"},r.a.createElement("img",{className:"avatar",src:c,alt:"Gravatar de ".concat(a)}),r.a.createElement("h4",null,r.a.createElement("span",null,"".concat(t+1,"\xba. ")," "),r.a.createElement("span",{"data-testid":"player-name-".concat(t)},a)),r.a.createElement("h4",{"data-testid":"player-score-".concat(t)},n))})))),r.a.createElement(F,null))}),$=(a(54),function(e){return{type:"CHANGE_CONFIG",payload:{config:e.config,value:e.value}}}),z=(a(55),function(){var e=Object(l.c)((function(e){return e.settings})),t=Object(n.useState)(),a=Object(b.a)(t,2),c=a[0],o=a[1],s=Object(n.useState)(!0),u=Object(b.a)(s,2),m=u[0],p=u[1],v=Object(n.useState)(e.difficulty),E=Object(b.a)(v,2),g=E[0],y=E[1],h=Object(n.useState)(e.type),O=Object(b.a)(h,2),N=O[0],j=O[1],k=Object(n.useState)(e.category),w=Object(b.a)(k,2),S=w[0],x=w[1],C=Object(l.b)();Object(n.useEffect)((function(){(function(){var e=Object(f.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A();case 2:t=e.sent,o(t),p(!1);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}));var T=function(e){var t=e.target,a=t.id,n=t.value;"difficulty"===a?(y(n),C($({config:a,value:n}))):"type"===a?(j(n),C($({config:a,value:n}))):(x(n),C($({config:a,value:n})))};return r.a.createElement("div",{className:"settings-page"},r.a.createElement("div",{className:"settings-container"},r.a.createElement("h1",null,"Configura\xe7\xf5es"),m?r.a.createElement("h2",null,"Carregando..."):r.a.createElement("div",{className:"settings-list"},r.a.createElement("label",{htmlFor:"difficulty"},"Selecione a dificuldade:"," ",r.a.createElement("select",{value:g,onChange:T,id:"difficulty"},r.a.createElement("option",{value:"any"},"Any Difficulty"),r.a.createElement("option",{value:"easy"},"Easy"),r.a.createElement("option",{value:"medium"},"Medium"),r.a.createElement("option",{value:"hard"},"Hard"))),r.a.createElement("label",{htmlFor:"type"},"Selecione o tipo:"," ",r.a.createElement("select",{value:N,onChange:T,id:"type"},r.a.createElement("option",{value:"any"},"Any Type"),r.a.createElement("option",{value:"multiple"},"Multiple Choice"),r.a.createElement("option",{value:"boolean"},"True / False"))),r.a.createElement("label",{htmlFor:"type"},"Selecione a categoria:"," ",r.a.createElement("select",{value:S,onChange:T,id:"category"},r.a.createElement("option",{value:"any"},"Any Category"),c.map((function(e){return r.a.createElement("option",{key:e.id,value:e.id},e.name)}))))),r.a.createElement(i.c,{to:"/"},r.a.createElement("input",{"data-testid":"btn-go-home",className:"btn",type:"button",value:"Inicio"}))),r.a.createElement(F,null))});function Q(){return r.a.createElement(s.c,null,r.a.createElement(s.a,{exact:!0,path:"/",component:J}),r.a.createElement(s.a,{exact:!0,path:"/jogo",component:U}),r.a.createElement(s.a,{exact:!0,path:"/feedback",component:K}),r.a.createElement(s.a,{exact:!0,path:"/ranking",component:V}),r.a.createElement(s.a,{exact:!0,path:"/configuracao",component:z}))}o.a.render(r.a.createElement(i.a,null,r.a.createElement(i.b,{basename:"/"},r.a.createElement(l.a,{store:I},r.a.createElement(Q,null)))),document.getElementById("root"))}},[[31,1,2]]]);
//# sourceMappingURL=main.278804ab.chunk.js.map